"use strict";(self["webpackChunkunitrade"]=self["webpackChunkunitrade"]||[]).push([[629],{1629:function(e,s,t){t.r(s),t.d(s,{default:function(){return I}});var a=t(3396),o=t(7139),i=t(9242);const r={class:"services-page"},n={class:"about-page"},h={class:"form-send-problem space-mono"},l={class:"selectors"},d={value:"plumber"},c={value:"joiner"},u={value:"electrician"},w={class:"additional-request-data"},m=["placeholder"],f={class:"washing-appointment"},p={class:"top"},g={class:"space-mono"},D={style:{"font-size":"12px","text-align":"center"},class:"space-mono"},y=["onClick"],_={key:0};function v(e,s,t,v,k,b){const $=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",n,[(0,a._)("h4",null,(0,o.zw)(e.$t("services.about.title")),1),(0,a._)("p",null,(0,o.zw)(e.$t("services.about.text")),1)]),(0,a._)("div",h,[(0,a._)("h4",null,(0,o.zw)(e.$t("services.send-problem")),1),(0,a._)("div",l,[(0,a.wy)((0,a._)("select",{name:"worker",id:"","onUpdate:modelValue":s[0]||(s[0]=e=>k.formData.worker=e)},[(0,a._)("option",d,(0,o.zw)(e.$t("global.worker.plumber")),1),(0,a._)("option",c,(0,o.zw)(e.$t("global.worker.joiner")),1),(0,a._)("option",u,(0,o.zw)(e.$t("global.worker.electrician")),1)],512),[[i.bM,k.formData.worker]]),(0,a._)("div",w,[(0,a.wy)((0,a._)("textarea",{name:"",id:"",placeholder:e.$t("form.textarea.problem-description"),"onUpdate:modelValue":s[1]||(s[1]=e=>k.formData.description=e)},null,8,m),[[i.nr,k.formData.description]]),(0,a._)("button",{onClick:s[2]||(s[2]=(0,i.iM)((e=>b.sendProblem()),["prevent"]))},(0,o.zw)(e.$t("global.send")),1)])])]),(0,a._)("div",f,[(0,a._)("span",p,[(0,a._)("p",{onClick:s[3]||(s[3]=e=>b.changeDay(0)),class:"arrows"},[(0,a.Wm)($,{icon:["fas","chevron-left"]})]),(0,a._)("h4",g,(0,o.zw)(e.$t("services.washing-appointment")),1),(0,a._)("p",{onClick:s[4]||(s[4]=e=>b.changeDay(1)),class:"arrows"},[(0,a.Wm)($,{icon:["fas","chevron-right"]})])]),(0,a._)("p",D,(0,o.zw)(k.washDay),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.defaultHours,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:(0,o.C_)(["wash-hour space-mono",{"wash-done":k.washes[e+7]}]),onClick:s=>b.clickHour(e+7)},[(0,a._)("div",null,(0,o.zw)(e+7)+":00-"+(0,o.zw)(e+8)+":00",1),k.washes[e+7]?((0,a.wg)(),(0,a.iD)("div",_,(0,o.zw)(k.washes[e+7].creator.room)+"."+(0,o.zw)(k.washes[e+7].creator.name),1)):(0,a.kq)("",!0)],10,y)))),128))])])}var k=t(65),b=t(5605),$={data(){return{formData:{worker:"plumber"},washDay:"",dayIndex:0,washes:[],defaultHours:16}},computed:{...(0,k.Se)(["user"])},watch:{user:{immediate:!0,deep:!0,handler(e){(0,b.Un)(e.dormitory,1,this.formatDateForDay(0,!0)).then((e=>{if(e){this.washes=[];for(let s of e){let{hour:e,...t}=s;this.washes[e]={...t}}}}))}}},methods:{loadWashings(){(0,b.Un)(this.user.dormitory,1,this.formatDateForDay(this.dayIndex,!0)).then((e=>{this.washes=[];for(let s of e){let{hour:e,...t}=s;this.washes[e]={...t}}}))},formatDateForDay(e=0,s=!1){const t=["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],a=["01","02","03","04","05","06","07","08","09","10","11","12"],o=new Date;o.setDate(o.getDate()+e);const i=t[o.getDay()],r=o.getDate(),n=a[o.getMonth()],h=o.getFullYear();return s?`${h}-${n}-${r}`:`${i} ${r}.${n}.${h}`},changeDay(e){0==e?this.dayIndex>0&&this.dayIndex--:this.dayIndex++,this.loadWashings(),this.washDay=this.formatDateForDay(this.dayIndex)},clickHour(e){if(this.user.id)if(this.washes[e]&&this.washes[e].creator.id!=this.user.id)alert("Година зайнята"),console.log("userId = "+this.user.id),console.log(this.washings[e].creator);else if(this.washes[e]&&this.washes[e].creator.id==this.user.id){let s=confirm(`Бажаєте видалити запис ${e}:00-${e+1}:00?`);s&&(0,b.wz)("washings",this.washes[e].id,this.user.google_id).then(this.loadWashings())}else{let s=confirm(`Бажаєте записатися на ${e}:00-${e+1}:00`);if(s){let s={day:this.formatDateForDay(this.dayIndex,!0),dormitory:this.user.dormitory,washing_machine_num:1,hour:e,user_id:this.user.id};(0,b.jX)("washings",s,this.user.google_id).then((()=>{this.loadWashings()}))}}else alert("Авторизуйтеся")},sendProblem(){if(this.user.id){let e=confirm("Впевнені, що хочете надіслати запис?");e&&(this.formData.user_id=this.user.id,(0,b.jX)("worker-tasks",this.formData,this.user.google_id).then((()=>{this.formData.description="",alert("Надіслано")})))}}},mounted(){this.washDay=this.formatDateForDay(),this.user.id&&this.loadWashings()}},z=t(89);const x=(0,z.Z)($,[["render",v],["__scopeId","data-v-41e2bf49"]]);var I=x}}]);
//# sourceMappingURL=629.8faf69c9.js.map