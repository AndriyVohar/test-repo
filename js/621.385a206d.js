"use strict";(self["webpackChunkunitrade"]=self["webpackChunkunitrade"]||[]).push([[621],{878:function(s,t,e){e.d(t,{Z:function(){return y}});var o=e(3396),a=e(7139),i=e(9242);const n={class:"post"},r=["src"],d={class:"post-data"},l={class:"text"},p={class:"post-name-icon"},c={class:"post-name"},u=["src"],g={class:"address"},m={class:"address"},_={class:"post-bottom"},h={class:"tag"},v={key:0,class:"buttons"};function w(s,t,e,w,P,f){const b=(0,o.up)("font-awesome-icon"),k=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(k,{class:"router-link",to:{name:"post",params:{id:this.post.id}}},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o._)("img",{src:e.post.imgURL,alt:"Фото поста"},null,8,r),(0,o._)("div",d,[(0,o._)("div",l,[(0,o._)("div",p,[(0,o._)("span",c,(0,a.zw)(e.post.title),1),(0,o._)("img",{src:e.post.creator.imgURL,alt:"",class:"user-profile"},null,8,u)]),(0,o._)("p",g,(0,a.zw)(s.$t("global.dormitory"))+" №"+(0,a.zw)(e.post.creator.dormitory)+" "+(0,a.zw)(e.post.creator.room),1),(0,o._)("p",m,(0,a.zw)(e.post.created_at),1)]),(0,o._)("div",_,[(0,o._)("div",h,[(0,o._)("span",null,(0,a.zw)(e.post.tag),1)]),s.user.id==e.post.creator.id||"admin"==s.user.role?((0,o.wg)(),(0,o.iD)("div",v,[(0,o.Wm)(b,{icon:["fas","pen"],onClick:t[0]||(t[0]=(0,i.iM)((s=>f.updatePost()),["prevent"]))}),(0,o.Wm)(b,{icon:["fas","trash"],onClick:t[1]||(t[1]=(0,i.iM)((s=>f.deletePost()),["prevent"]))})])):(0,o.kq)("",!0)])])])])),_:1},8,["to"])}e(560);var P=e(65),f=e(5605),b={name:"Post_comp",props:{post:Object},computed:{...(0,P.Se)(["user"])},methods:{updatePost(){this.$router.push({name:"postEdit",params:{id:this.post.id}})},deletePost(){confirm("Видалити оголошення ?")&&(0,f.wz)("advertisements",this.post.id).then((()=>{location.reload()})).catch((s=>{console.log(s)}))}}},k=e(89);const x=(0,k.Z)(b,[["render",w],["__scopeId","data-v-2b2c76c1"]]);var y=x},7621:function(s,t,e){e.r(t),e.d(t,{default:function(){return _}});var o=e(3396),a=e(7139);const i={class:"container"},n={key:0,class:"posts_list"},r={class:"page-selector"},d={key:1,class:"posts_list"};function l(s,t,e,l,p,c){const u=(0,o.up)("post-component"),g=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",i,[p.postsList&&p.postsList.length>0?((0,o.wg)(),(0,o.iD)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.postsList,(s=>((0,o.wg)(),(0,o.j4)(u,{post:s,key:s.id},null,8,["post"])))),128)),(0,o._)("div",r,[(0,o.Wm)(g,{icon:"arrow-left",class:(0,a.C_)([{"hidden-page":1==p.page_index},"page-toggle"]),onClick:t[0]||(t[0]=s=>c.subPage())},null,8,["class"]),(0,o._)("span",null,(0,a.zw)(p.page_index),1),(0,o.Wm)(g,{icon:"arrow-right",class:(0,a.C_)([{"hidden-page":p.page_index==p.lastPage},"page-toggle"]),onClick:t[1]||(t[1]=s=>c.addPage())},null,8,["class"])])])):((0,o.wg)(),(0,o.iD)("div",d,(0,a.zw)(s.$t("global.loading"))+"...",1))])}var p=e(878),c=e(5605),u={name:"Posts_list",components:{PostComponent:p.Z},methods:{subPage(){this.page_index>1&&(this.page_index-=1)},addPage(){this.page_index!=this.lastPage&&(this.page_index+=1)},loadPostsList(s,t){(0,c.yO)("advertisements",s,t).then((s=>{this.postsList=s.data,this.lastPage=s.last_page})).catch((s=>{console.log(s),this.postsList=null}))}},data(){return{page_index:1,search:void 0,postsList:null,lastPage:1}},computed:{dormitoryNumber(){return this.$store.state.dormitoryNumber}},watch:{page_index(s){this.loadPostsList(this.dormitoryNumber,s)},dormitoryNumber(s){this.page_index=1,this.loadPostsList(s,this.page_index)}},mounted(){this.loadPostsList(this.dormitoryNumber,this.page_index)},created(){}},g=e(89);const m=(0,g.Z)(u,[["render",l],["__scopeId","data-v-63074a62"]]);var _=m}}]);
//# sourceMappingURL=621.385a206d.js.map