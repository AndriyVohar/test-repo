"use strict";(self["webpackChunkunitrade"]=self["webpackChunkunitrade"]||[]).push([[348],{5348:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});a(560);var s=a(3396),o=a(9242),r=a(7139);const i={key:0,class:"form-container"},n={class:"form-title"},l={class:"input-group"},u=["placeholder"],c=["placeholder"],d={class:"button-group"},m={type:"submit",class:"save-button"};function h(e,t,a,h,p,f){return(0,s.wg)(),(0,s.iD)("div",null,[p.formData?((0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("form",{onSubmit:t[4]||(t[4]=(0,o.iM)((e=>f.updatePost()),["prevent"])),class:"form-content"},[(0,s._)("h2",n,(0,r.zw)(e.$t("post.edit")),1),(0,s._)("div",l,[(0,s._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>f.checkFileSize&&f.checkFileSize(...e)),id:"photo",accept:"image/*",class:"input-field"},null,32),(0,s.wy)((0,s._)("input",{type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>p.formData.title=e),placeholder:e.$t("form.name"),class:"input-field",required:""},null,8,u),[[o.nr,p.formData.title]]),(0,s.wy)((0,s._)("input",{type:"text",id:"tag","onUpdate:modelValue":t[2]||(t[2]=e=>p.formData.tag=e),placeholder:e.$t("form.tag"),class:"input-field",required:""},null,8,c),[[o.nr,p.formData.tag]])]),(0,s._)("div",d,[(0,s._)("button",m,(0,r.zw)(e.$t("form.submit")),1),(0,s._)("button",{type:"button",class:"cancel-button",onClick:t[3]||(t[3]=e=>this.$router.push("/me"))},(0,r.zw)(e.$t("form.cancel")),1)])],32)])):(0,s.kq)("",!0)])}var p=a(65),f=a(5605),g={data(){return{formData:{}}},computed:{...(0,p.Se)(["user","accessToken"])},methods:{checkFileSize(e){const t=e.target,a=t.files[0];if(a){const s=a.size/1024;s>600?(alert("Фотографія має бути менше 600KB"),t.value=""):this.encodeImageFileAsURL(e)}},encodeImageFileAsURL(e){var t=e.target.files[0];if(t){var a=new FileReader;a.onloadend=()=>{this.formData.imgURL=a.result},a.readAsDataURL(t)}else console.error("No file selected.")},updatePost(){this.formData.status=0,(0,f.$G)("advertisements",this.$route.params.id,this.formData,this.accessToken).then((()=>{this.$router.push("/me")})).catch((e=>{console.log(e)}))}},mounted(){(0,f.ZX)("advertisements",this.$route.params.id).then((e=>{["admin","commandant"].includes(this.user.role)||this.user.id==e.creator.id?this.formData=e:0==this.user.status?(alert("Ваш акаунт неактивний, зачекайте на підтвердження комендантом"),this.$router.push("/me")):(alert("Ви не маєте доступу до цих функцій"),this.$router.push("/me"))})).catch((()=>{console.log("something wrong")}))}},v=a(89);const D=(0,v.Z)(g,[["render",h],["__scopeId","data-v-4067cef3"]]);var k=D}}]);
//# sourceMappingURL=348.21e4cae4.js.map