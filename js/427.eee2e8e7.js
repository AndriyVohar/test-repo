"use strict";(self["webpackChunkunitrade"]=self["webpackChunkunitrade"]||[]).push([[427],{5427:function(e,s,a){a.r(s),a.d(s,{default:function(){return I}});var t=a(3396),o=a(7139),i=a(9242);const r={class:"services-page"},n={class:"about-page"},h={class:"form-send-problem space-mono"},l={class:"selectors"},d={value:"plumber"},c={value:"joiner"},u={value:"electrician"},w={class:"additional-request-data"},m=["placeholder"],p={class:"washing-appointment"},f={class:"top"},g={class:"space-mono"},D={style:{"font-size":"12px","text-align":"center"},class:"space-mono"},y=["onClick"],_={key:0};function v(e,s,a,v,k,$){const b=(0,t.up)("font-awesome-icon");return(0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",n,[(0,t._)("h4",null,(0,o.zw)(e.$t("services.about.title")),1),(0,t._)("p",null,(0,o.zw)(e.$t("services.about.text")),1)]),(0,t._)("div",h,[(0,t._)("h4",null,(0,o.zw)(e.$t("services.send-problem")),1),(0,t._)("div",l,[(0,t.wy)((0,t._)("select",{name:"worker",id:"","onUpdate:modelValue":s[0]||(s[0]=e=>k.formData.worker=e)},[(0,t._)("option",d,(0,o.zw)(e.$t("global.worker.plumber")),1),(0,t._)("option",c,(0,o.zw)(e.$t("global.worker.joiner")),1),(0,t._)("option",u,(0,o.zw)(e.$t("global.worker.electrician")),1)],512),[[i.bM,k.formData.worker]]),(0,t._)("div",w,[(0,t.wy)((0,t._)("textarea",{name:"",id:"",placeholder:e.$t("form.textarea.problem-description"),"onUpdate:modelValue":s[1]||(s[1]=e=>k.formData.description=e)},null,8,m),[[i.nr,k.formData.description]]),(0,t._)("button",{onClick:s[2]||(s[2]=(0,i.iM)((e=>$.sendProblem()),["prevent"]))},(0,o.zw)(e.$t("global.send")),1)])])]),(0,t._)("div",p,[(0,t._)("span",f,[(0,t._)("p",{onClick:s[3]||(s[3]=e=>$.changeDay(0)),class:"arrows"},[(0,t.Wm)(b,{icon:["fas","chevron-left"]})]),(0,t._)("h4",g,(0,o.zw)(e.$t("services.washing-appointment")),1),(0,t._)("p",{onClick:s[4]||(s[4]=e=>$.changeDay(1)),class:"arrows"},[(0,t.Wm)(b,{icon:["fas","chevron-right"]})])]),(0,t._)("p",D,(0,o.zw)(k.washDay),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.defaultHours,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e,class:(0,o.C_)(["wash-hour space-mono",{"wash-done":k.washes[e+7]}]),onClick:s=>$.clickHour(e+7)},[(0,t._)("div",null,(0,o.zw)(e+7)+":00-"+(0,o.zw)(e+8)+":00",1),k.washes[e+7]?((0,t.wg)(),(0,t.iD)("div",_,(0,o.zw)(k.washes[e+7].creator.room)+"."+(0,o.zw)(k.washes[e+7].creator.name),1)):(0,t.kq)("",!0)],10,y)))),128))])])}var k=a(65),$=a(5605),b={data(){return{formData:{worker:"plumber"},washDay:"",dayIndex:0,washes:[],defaultHours:16}},computed:{...(0,k.Se)(["user"])},watch:{user:{immediate:!0,deep:!0,handler(e){(0,$.Un)(e.dormitory,1,this.formatDateForDay(0,!0)).then((e=>{this.washes=[];for(let s of e){let{hour:e,...a}=s;this.washes[e]={...a}}}))}}},methods:{loadWashings(){(0,$.Un)(this.user.dormitory,1,this.formatDateForDay(this.dayIndex,!0)).then((e=>{this.washes=[];for(let s of e){let{hour:e,...a}=s;this.washes[e]={...a}}}))},formatDateForDay(e=0,s=!1){const a=["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],t=["01","02","03","04","05","06","07","08","09","10","11","12"],o=new Date;o.setDate(o.getDate()+e);const i=a[o.getDay()],r=o.getDate(),n=t[o.getMonth()],h=o.getFullYear();return s?`${h}-${n}-${r}`:`${i} ${r}.${n}.${h}`},changeDay(e){0==e?this.dayIndex>0&&this.dayIndex--:this.dayIndex++,this.loadWashings(),this.washDay=this.formatDateForDay(this.dayIndex)},clickHour(e){if(this.user.id)if(this.washes[e]&&this.washes[e].creator.id!=this.user.id)alert("Година зайнята"),console.log("userId = "+this.user.id),console.log(this.washings[e].creator);else if(this.washes[e]&&this.washes[e].creator.id==this.user.id){let s=confirm(`Бажаєте видалити запис ${e}:00-${e+1}:00?`);s&&(0,$.wz)("washings",this.washes[e].id,this.user.google_id).then(this.loadWashings())}else{let s=confirm(`Бажаєте записатися на ${e}:00-${e+1}:00`);if(s){let s={day:this.formatDateForDay(this.dayIndex,!0),dormitory:this.user.dormitory,washing_machine_num:1,hour:e,user_id:this.user.id};(0,$.jX)("washings",s,this.user.google_id).then((()=>{this.loadWashings()}))}}else alert("Авторизуйтеся")},sendProblem(){if(this.user.id){let e=confirm("Впевнені, що хочете надіслати запис?");e&&(this.formData.user_id=this.user.id,(0,$.jX)("worker-tasks",this.formData,this.user.google_id).then((()=>{this.formData.description="",alert("Надіслано")})))}}},mounted(){this.washDay=this.formatDateForDay(),this.user.id&&this.loadWashings()}},z=a(89);const x=(0,z.Z)(b,[["render",v],["__scopeId","data-v-ad1a7e8c"]]);var I=x}}]);
//# sourceMappingURL=427.eee2e8e7.js.map