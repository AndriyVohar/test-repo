"use strict";(self["webpackChunkunitrade"]=self["webpackChunkunitrade"]||[]).push([[457],{7070:function(e,t,s){s.d(t,{Z:function(){return b}});var o=s(3396),i=s(7139),a=s(9242);const n=["src"],r={class:"post-data"},l={class:"text"},d={class:"post-name-icon"},c={class:"post-name"},p=["src"],u={class:"address"},m={class:"address"},g={class:"post-bottom"},_={class:"tag"},h={key:0,class:"buttons"};function w(e,t,s,w,k,v){const f=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",{class:"post",onClick:t[2]||(t[2]=e=>v.openPost())},[(0,o._)("img",{src:s.post.imgURL,alt:"Фото поста"},null,8,n),(0,o._)("div",r,[(0,o._)("div",l,[(0,o._)("div",d,[(0,o._)("span",c,(0,i.zw)(s.post.title),1),(0,o._)("img",{src:s.post.creator.imgURL,alt:"",class:"user-profile"},null,8,p)]),(0,o._)("p",u,(0,i.zw)(e.$t("global.dormitory"))+" №"+(0,i.zw)(s.post.creator.dormitory)+" "+(0,i.zw)(s.post.creator.room),1),(0,o._)("p",m,(0,i.zw)(s.post.created_at),1)]),(0,o._)("div",g,[(0,o._)("div",_,[(0,o._)("span",null,(0,i.zw)(s.post.tag),1)]),e.user.id==s.post.creator.id||"admin"==e.user.role?((0,o.wg)(),(0,o.iD)("div",h,[(0,o.Wm)(f,{icon:["fas","pen"],onClick:t[0]||(t[0]=(0,a.iM)((e=>v.updatePost()),["stop"]))}),(0,o.Wm)(f,{icon:["fas","trash"],onClick:t[1]||(t[1]=(0,a.iM)((e=>v.deletePost()),["stop"]))})])):(0,o.kq)("",!0)])])])}s(560);var k=s(65),v=s(5605),f={name:"Post_comp",props:{post:Object},computed:{...(0,k.Se)(["user"])},methods:{openPost(){this.$router.push({name:"advertisement",params:{id:this.post.id}})},updatePost(){this.$router.push({name:"advertisementEdit",params:{id:this.post.id}})},deletePost(){confirm("Видалити оголошення ?")&&(0,v.wz)("advertisements",this.post.id).then((()=>{location.reload()})).catch((e=>{console.log(e)}))}}},y=s(89);const z=(0,y.Z)(f,[["render",w],["__scopeId","data-v-26400b47"]]);var b=z},1095:function(e,t,s){s.d(t,{Z:function(){return h}});var o=s(3396),i=s(7139),a=s(9242);const n={class:"custom-alert"},r={class:"left-part"},l={key:0},d={class:"right-part"},c={key:0,class:"buttons"};function p(e,t,s,p,u,m){const g=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",r,[(0,o._)("h4",null,["admin"==s.user.role?((0,o.wg)(),(0,o.iD)("span",l,"№"+(0,i.zw)(s.attention.dormitory),1)):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,i.zw)(s.attention.title)+" ",1),(0,o._)("span",null,(0,i.zw)(s.attention.created_at),1)]),(0,o._)("p",null,(0,i.zw)(s.attention.description),1)]),(0,o._)("div",d,[(0,o.Wm)(g,{icon:"exclamation",beat:"",class:"exclamation-danger-end"})]),"admin"==s.user.role?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(g,{icon:["fas","pen"],onClick:t[0]||(t[0]=(0,a.iM)((e=>m.updateInfo()),["stop"]))}),(0,o.Wm)(g,{icon:["fas","trash"],onClick:t[1]||(t[1]=(0,a.iM)((e=>m.deleteInfo()),["stop"]))})])):(0,o.kq)("",!0)])}s(560);var u=s(5605),m={name:"InfoComponent",props:{attention:Object,user:{type:Object,default:()=>({})}},methods:{updateInfo(){this.$router.push({name:"infoEdit",params:{id:this.attention.id}})},deleteInfo(){confirm("Видалити інформацію ?")&&(0,u.wz)("infos",this.attention.id,this.user.google_id).then((()=>location.reload()))}}},g=s(89);const _=(0,g.Z)(m,[["render",p],["__scopeId","data-v-9951c35a"]]);var h=_},457:function(e,t,s){s.r(t),s.d(t,{default:function(){return le}});var o=s(3396),i=s(7139),a=s(9242),n=s(3651),r=s(5943),l=s(4729);const d=e=>((0,o.dD)("data-v-d84ae77c"),e=e(),(0,o.Cn)(),e),c={key:0,class:"user-profile"},p={class:"user-data"},u={class:"main-data"},m={class:"profile-photo"},g=["src"],_={class:"data"},h={id:"fullname"},w={id:"dormitory"},k={id:"creationdate"},v={class:"contacts"},f={class:"left-part"},y={class:"right-part"},z={class:"links"},b=["href"],C=["href"],W={key:0,class:"user-selector"},$={class:"select-group"},D={value:"advertisements"},x={value:"works"},P={value:"infos"},U={key:0,src:n,alt:""},Z={key:1,src:r,alt:""},I={key:2,src:l,alt:""},M={class:"user-actions"},L=d((()=>(0,o._)("div",{class:"spacer"},null,-1))),O={key:1,class:"list"},j={key:2,class:"list"},Y={class:"page-selector"},V={key:3,class:"list"},q={key:1,class:"user-edit"},R={class:"main-data"},B={class:"profile-photo"},A=["src"],E={class:"data"},G={id:"fullname"},H={id:"creationdate"},K={class:"inputs"},J={class:"input-row"},S={class:"input-row"},F={class:"input-row"},T={class:"input-row"},X={class:"input-row"},N={class:"actions"};function Q(e,t,s,n,r,l){const d=(0,o.up)("font-awesome-icon"),Q=(0,o.up)("advertisement-component"),ee=(0,o.up)("work-component"),te=(0,o.up)("info-component");return r.edit_state?((0,o.wg)(),(0,o.iD)("div",q,[(0,o._)("div",R,[(0,o._)("div",B,[(0,o._)("img",{src:r.user.imgURL,alt:"Фото профілю"},null,8,A)]),(0,o._)("div",E,[(0,o._)("p",G,(0,i.zw)(r.user.name),1),(0,o._)("p",H,(0,i.zw)(e.$t("profile.dateOfJoining"))+": "+(0,i.zw)(r.user.created_at),1)])]),(0,o._)("div",K,[(0,o._)("div",J,[(0,o.Wm)(d,{icon:["fas","building"]}),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=e=>r.user.dormitory=e),max:"5",min:"1",placeholder:"Номер гуртожитку. Приклад: 4"},null,512),[[a.nr,r.user.dormitory]])]),(0,o._)("div",S,[(0,o.Wm)(d,{icon:["fas","person-shelter"]}),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>r.user.room=e),placeholder:"Номер кімнати. Приклад: 82/4"},null,512),[[a.nr,r.user.room]])]),(0,o._)("div",F,[(0,o.Wm)(d,{icon:["fas","phone"]}),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>r.user.phone=e),placeholder:"Приклад: +380950990019"},null,512),[[a.nr,r.user.phone]])]),(0,o._)("div",T,[(0,o.Wm)(d,{icon:["fab","instagram"]}),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>r.user.instagram=e),placeholder:"Приклад: uzhnu"},null,512),[[a.nr,r.user.instagram]])]),(0,o._)("div",X,[(0,o.Wm)(d,{icon:["fab","telegram"]}),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>r.user.telegram=e),placeholder:"Приклад: uzhnu"},null,512),[[a.nr,r.user.telegram]])])]),(0,o._)("div",N,[(0,o._)("button",{id:"save",onClick:t[13]||(t[13]=e=>l.setUser())},(0,i.zw)(e.$t("global.save")),1),(0,o._)("button",{id:"cancel",onClick:t[14]||(t[14]=e=>this.edit_state=!1)},(0,i.zw)(e.$t("global.cancel")),1)])])):((0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",p,[(0,o._)("div",u,[(0,o._)("div",m,[(0,o._)("img",{src:r.user.imgURL,alt:"Фото профілю"},null,8,g),(0,o._)("div",{class:"edit-pen",onClick:t[0]||(t[0]=e=>r.edit_state=!0)},[(0,o.Wm)(d,{icon:["fas","pen"]})])]),(0,o._)("div",_,[(0,o._)("p",h,(0,i.zw)(r.user.name),1),(0,o._)("p",w,(0,i.zw)(e.$t("global.dormitory"))+" №"+(0,i.zw)(r.user.dormitory)+", "+(0,i.zw)(e.$t("global.room"))+" "+(0,i.zw)(r.user.room),1),(0,o._)("p",k,(0,i.zw)(e.$t("profile.dateOfJoining"))+": "+(0,i.zw)(r.user.created_at),1)])]),(0,o._)("div",v,[(0,o._)("div",f,[(0,o._)("p",null,[(0,o.Wm)(d,{icon:["fas","phone"]}),(0,o.Uk)(" "+(0,i.zw)(r.user.phone),1)]),(0,o._)("p",null,[(0,o.Wm)(d,{icon:["far","envelope"]}),(0,o.Uk)(" "+(0,i.zw)(r.user.email),1)])]),(0,o._)("div",y,[(0,o._)("div",z,[(0,o._)("a",{href:"https://instagram.com/"+r.user.instagram},[(0,o.Wm)(d,{icon:["fab","instagram"]})],8,b),(0,o._)("a",{href:"https://t.me/"+r.user.telegram},[(0,o.Wm)(d,{icon:["fab","telegram"]})],8,C)])])])]),"admin"==r.user.role?((0,o.wg)(),(0,o.iD)("div",W,[(0,o._)("span",null,(0,i.zw)(e.$t("profile.show")),1),(0,o._)("div",$,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.toggle=e)},[(0,o._)("option",D,(0,i.zw)(e.$t("global.advertisement")),1),(0,o._)("option",x,(0,i.zw)(e.$t("global.work")),1),(0,o._)("option",P,(0,i.zw)(e.$t("global.info")),1)],512),[[a.bM,r.toggle]]),"adverisements"==r.toggle?((0,o.wg)(),(0,o.iD)("img",U)):"works"==r.toggle?((0,o.wg)(),(0,o.iD)("img",Z)):((0,o.wg)(),(0,o.iD)("img",I))])])):(0,o.kq)("",!0),(0,o._)("div",M,[(0,o._)("button",{id:"exit",onClick:t[2]||(t[2]=e=>l.signOutMethod())},(0,i.zw)(e.$t("profile.logout")),1),"advertisements"==r.toggle?((0,o.wg)(),(0,o.iD)("button",{key:0,id:"create-post",onClick:t[3]||(t[3]=e=>l.createBtn(r.toggle))},(0,i.zw)(e.$t("profile.createAdvertisement")),1)):"works"==r.toggle?((0,o.wg)(),(0,o.iD)("button",{key:1,id:"create-work",onClick:t[4]||(t[4]=e=>l.createBtn(r.toggle))},(0,i.zw)(e.$t("profile.createWork")),1)):((0,o.wg)(),(0,o.iD)("button",{key:2,id:"create-info",onClick:t[5]||(t[5]=e=>l.createBtn(r.toggle))},(0,i.zw)(e.$t("profile.createInfo")),1))]),L,"advertisements"==r.toggle?((0,o.wg)(),(0,o.iD)("div",O,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.posts_list,(e=>((0,o.wg)(),(0,o.j4)(Q,{post:e,key:e.id},null,8,["post"])))),128))])):"works"==r.toggle?((0,o.wg)(),(0,o.iD)("div",j,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.works_list,(e=>((0,o.wg)(),(0,o.j4)(ee,{work:e,userProp:r.user,key:e.id},null,8,["work","userProp"])))),128)),(0,o._)("div",Y,[(0,o.Wm)(d,{icon:"arrow-left",class:(0,i.C_)([{"hidden-page":1==r.page_index},"page-toggle"]),onClick:t[6]||(t[6]=e=>l.subPage())},null,8,["class"]),(0,o._)("span",null,(0,i.zw)(r.page_index),1),(0,o.Wm)(d,{icon:"arrow-right",class:(0,i.C_)([{"hidden-page":r.page_index==r.lastPage},"page-toggle"]),onClick:t[7]||(t[7]=e=>l.addPage())},null,8,["class"])])])):((0,o.wg)(),(0,o.iD)("div",V,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.attentionList,(e=>((0,o.wg)(),(0,o.j4)(te,{attention:e,user:r.user,key:e.title},null,8,["attention","user"])))),128))]))]))}s(560);var ee=s(72),te=s(7070),se=s(8840),oe=s(1095),ie=s(5605),ae={components:{WorkComponent:se.Z,AdvertisementComponent:te.Z,InfoComponent:oe.Z},data(){return{toggle:"advertisements",user:{},posts_list:[],works_list:[],attentionList:[],edit_state:!1,page_index:1,lastPage:1}},computed:{},mounted(){(0,ie.ZX)("users",ee.Z.getGoogleIdFromCookie()).then((e=>{this.user=e,this.$store.commit("changeUser",e),(0,ie.YY)(this.user.id,this.user.google_id).then((e=>{this.posts_list=e}))}))},watch:{page_index(e){(0,ie.MZ)("works",e).then((e=>{this.works_list=e.data,this.lastPage=e.last_page})).catch((e=>{console.error(e)}))},toggle(e){"advertisements"==e&&this.posts_list.length<1?(0,ie.YY)(this.user.id,this.user.google_id).then((e=>{console.log(e),this.posts_list=e})):"works"==e&&this.works_list.length<1?(0,ie.MZ)("works",this.page_index).then((e=>{this.works_list=e.data,this.lastPage=e.last_page})).catch((e=>{console.error(e)})):"infos"==e&&this.attentionList.length<1&&(0,ie.MZ)("infos").then((e=>{this.attentionList=e})).catch((e=>{console.error(e)}))}},methods:{subPage(){this.page_index>1&&(this.page_index-=1)},addPage(){this.page_index!=this.lastPage&&(this.page_index+=1)},openPost(e){this.$router.push({name:"post",params:{id:e}})},signOutMethod(){ee.Z.removeGoogleIdCookie(),ee.Z.removeAccessTokenCookie(),this.$router.push("/")},setUser(){if(this.user.dormitory>0&&this.user.dormitory<6){const e={...this.user};delete e.id,delete e.created_at,(0,ie.$G)("users",this.user.google_id,e,this.user.google_id).then((()=>{location.reload()}))}else alert("Введіть коректний номер гуртожиту")},createBtn(e){this.user.dormitory&&this.user.instagram&&this.user.phone&&this.user.room&&this.user.telegram?this.$router.push(`${e}/create`):alert("Редагуйте дані свого профілю, додавши інформацію")}}},ne=s(89);const re=(0,ne.Z)(ae,[["render",Q],["__scopeId","data-v-d84ae77c"]]);var le=re},8840:function(e,t,s){s.d(t,{Z:function(){return y}});var o=s(3396),i=s(7139),a=s(9242);const n=["src"],r={class:"post-data"},l={class:"text"},d={class:"post-name"},c={style:{"font-size":"10px"}},p={style:{"font-size":"14px"}},u={class:"post-bottom"},m={class:"tag"},g={key:0,class:"buttons"};function _(e,t,s,_,h,w){const k=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",{class:"work",onClick:t[2]||(t[2]=e=>w.openWork())},[(0,o._)("img",{src:s.work.imgURL,alt:"Фото поста"},null,8,n),(0,o._)("div",r,[(0,o._)("div",l,[(0,o._)("p",d,(0,i.zw)(s.work.title),1)]),(0,o._)("p",c,(0,i.zw)(s.work.created_at),1),(0,o._)("div",p,(0,i.zw)(s.work.salary)+"₴",1),(0,o._)("div",u,[(0,o._)("div",m,[(0,o._)("span",null,(0,i.zw)(s.work.tag),1)]),"admin"==e.user.role?((0,o.wg)(),(0,o.iD)("div",g,[(0,o.Wm)(k,{icon:["fas","pen"],onClick:t[0]||(t[0]=(0,a.iM)((e=>w.updateWork()),["stop"]))}),(0,o.Wm)(k,{icon:["fas","trash"],onClick:t[1]||(t[1]=(0,a.iM)((e=>w.deleteWork()),["stop"]))})])):(0,o.kq)("",!0)])])])}s(560);var h=s(65),w=s(5605),k={name:"WorkComponent",props:{work:Object},computed:{...(0,h.Se)(["user"])},methods:{updateWork(){this.$router.push({name:"workEdit",params:{id:this.work.id}})},openWork(){this.$router.push({name:"work",params:{id:this.work.id}})},deleteWork(){confirm("Видалити оголошення ?")&&(0,w.wz)("works",this.work.id).then((()=>{location.reload()})).catch((e=>{console.log(e)}))}}},v=s(89);const f=(0,v.Z)(k,[["render",_],["__scopeId","data-v-0c0fcc0e"]]);var y=f}}]);
//# sourceMappingURL=457.66833354.js.map