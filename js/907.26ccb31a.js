"use strict";(self["webpackChunkunitrade"]=self["webpackChunkunitrade"]||[]).push([[907],{8907:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});a(560);var r=a(3396),o=a(7139),l=a(9242);const s={key:0,class:"form-container"},i={class:"form-content"},n={class:"form-title"},u={class:"input-group"},c=["placeholder"],d=["placeholder"],p=["placeholder"],m=["placeholder"],f={class:"button-group"};function h(e,t,a,h,k,g){return(0,r.wg)(),(0,r.iD)("div",null,[k.formData?((0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("form",i,[(0,r._)("h2",n,(0,o.zw)(e.$t("work.edit")),1),(0,r._)("div",u,[(0,r._)("input",{type:"file",id:"photo",onChange:t[0]||(t[0]=(...e)=>g.checkFileSize&&g.checkFileSize(...e)),accept:"image/*",class:"input-field"},null,32),(0,r.wy)((0,r._)("input",{type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>k.formData.title=e),placeholder:e.$t("form.name"),class:"input-field",required:""},null,8,c),[[l.nr,k.formData.title]]),(0,r.wy)((0,r._)("input",{type:"text",id:"tag","onUpdate:modelValue":t[2]||(t[2]=e=>k.formData.tag=e),placeholder:e.$t("form.tag"),class:"input-field",required:""},null,8,d),[[l.nr,k.formData.tag]]),(0,r.wy)((0,r._)("input",{type:"number",id:"salary","onUpdate:modelValue":t[3]||(t[3]=e=>k.formData.salary=e),placeholder:e.$t("form.salary"),class:"input-field",required:""},null,8,p),[[l.nr,k.formData.salary]]),(0,r.wy)((0,r._)("textarea",{style:{resize:"none"},"onUpdate:modelValue":t[4]||(t[4]=e=>k.formData.description=e),placeholder:e.$t("form.description"),class:"input-field",required:""},null,8,m),[[l.nr,k.formData.description]])]),(0,r._)("div",f,[(0,r._)("button",{type:"submit",class:"save-button",onClick:t[5]||(t[5]=e=>g.updateWork())},(0,o.zw)(e.$t("form.submit")),1),(0,r._)("button",{type:"button",class:"cancel-button",onClick:t[6]||(t[6]=e=>this.$router.push("/me"))},(0,o.zw)(e.$t("form.cancel")),1)])])])):(0,r.kq)("",!0)])}var k=a(65),g=a(5605),y={data(){return{formData:{}}},computed:{...(0,k.Se)(["user","accessToken"])},methods:{checkFileSize(e){const t=e.target,a=t.files[0];if(a){const r=a.size/1024;r>600?(alert("Фотографія має бути менше 600KB"),t.value=""):this.encodeImageFileAsURL(e)}},encodeImageFileAsURL(e){var t=e.target.files[0];if(t){var a=new FileReader;a.onloadend=()=>{this.formData.img=a.result},a.readAsDataURL(t)}else console.error("No file selected.")},updateWork(){(0,g.$G)("works",this.$route.params.id,this.formData,this.accessToken).then((()=>{this.$router.push("/me")})).catch((e=>{console.log(e)}))}},mounted(){["admin","commandant"].includes(this.user.role)?(0,g.ZX)("works",this.$route.params.id).then((e=>{this.formData=e})).catch((e=>{console.error(e)})):0==this.user.status?(alert("Ваш акаунт неактивний, зачекайте на підтвердження комендантом"),this.$router.push("/me")):(alert("Ви не маєте доступу до цих функцій"),this.$router.push("/me"))}},D=a(89);const w=(0,D.Z)(y,[["render",h],["__scopeId","data-v-a3f02634"]]);var $=w}}]);
//# sourceMappingURL=907.26ccb31a.js.map